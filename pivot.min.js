var pivot=function(){function g(g){return c=[],d=[],e={},a={},b={},f={rowLabels:{},columnLabels:{},summaries:{}},g===undefined&&(g={}),g.fields!==undefined&&J(g.fields),g.filters!==undefined&&E(g.filters),g.rowLabels!==undefined&&ab(g.rowLabels),g.columnLabels!==undefined&&bb(g.columnLabels),g.summaries!==undefined&&cb(g.summaries),g.csv!==undefined&&x(g.csv),g.json!==undefined&&w(g.json),pivot}function h(){return g()}function i(){return{fields:K(),filters:b,rowLabels:s(f.rowLabels),columnLabels:s(f.columnLabels),summaries:s(f.summaries)}}function j(){return{pad:k,padRight:l,padLeft:m,formatDate:n,formatTime:o,isArray:p,isRegExp:q,shallowClone:r,objectKeys:s,objectType:t,sortNumerically:u}}function k(a,b,c,d){d===undefined&&(d=" "),b=b.toString(),d=d.toString();while(b.length<c)a==="left"?b=d+b:b+=d;return b}function l(a,b,c){return k("right",a,b,c)}function m(a,b,c){return k("left",a,b,c)}function n(a){return a.getUTCFullYear()+"-"+m(a.getUTCMonth()+1,2,"0")+"-"+m(a.getUTCDate(),2,"0")}function o(a){return n(a)+" "+m(a.getUTCHours(),2,"0")+":"+m(a.getUTCMinutes(),2,"0")}function p(a){return Array.isArray?Array.isArray(a):t(a)=="array"}function q(a){return t(a)=="regexp"}function r(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function s(a){if(Object.keys)return Object.keys(a);var b=[];for(key in a)b.push(key);return b}function t(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function u(a){return a.sort(function(a,b){return a-b})}function v(b){var c=[],d={},e=-1,f=b.length;while(++e<f){var g=a[b[e]];g===undefined&&(g=Q(b[e])),c.push(g)}return c}function w(a){var b,d=L("pseudo");t(a)==="string"&&(a=JSON.parse(a)),c=[];var e={},f=-1,g=a.length;while(++f<g)f===0?b=v(a[f]):c.push(z(a[f],b,d))}function x(a){var b,d=L("pseudo");c=y(a,function(a,c){if(c!==0)return z(a,b,d);b=v(a)})}function y(a,b){function j(){if(f.lastIndex>=a.length)return d;if(i)return i=!1,c;var b=f.lastIndex;if(a.charCodeAt(b)===34){var e=b;while(e++<a.length)if(a.charCodeAt(e)===34){if(a.charCodeAt(e+1)!==34)break;e++}f.lastIndex=e+2;var g=a.charCodeAt(e+1);return g===13?(i=!0,a.charCodeAt(e+2)===10&&f.lastIndex++):g===10&&(i=!0),a.substring(b+1,e).replace(/""/g,'"')}var h=f.exec(a);return h?(i=h[0].charCodeAt(0)!==44,a.substring(b,h.index)):(f.lastIndex=a.length,a.substring(b))}var c={},d={},e=[],f=/\r\n|[,\r\n]/g,g=0,h,i;f.lastIndex=0;while((h=j())!==d){var k=[];while(h!==c&&h!==d)k.push(h),h=j();if(b&&!(k=b(k,g++)))continue;e.push(k)}return e}function z(a,b,c){var d={},e=-1,f=b.length;while(++e<f){var g=T(b[e].name,a[e]);d[b[e].name]=g,R(b[e].name,g)}e=-1,f=c.length;while(++e<f){var h=c[e],g=T(h.name,h.pseudoFunction(d));d[h.name]=g,R(h.name,g)}return d}function A(a){var b={all:D,set:E,apply:F,add:C};return a!==undefined?b[a]:b}function B(a){a===undefined&&(a=b);var c;for(c in a)if(a.hasOwnProperty(c)&&!q(a[c]))if(p(a[c])){var d=-1,e=a[c].length;while(++d<e)a[c][d]=T(c,a[c][d])}else a[c]=T(c,a[c])}function C(a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);B()}function D(){return b}function E(a){b=a,B()}function F(a){var f=d,g=[];a!==undefined&&E(a);var h=H();h?f=d:f=c;var i=f.length,j=s(b).length,k=-1;while(++k<i){var l=f[k],m=0;for(var n in b)b.hasOwnProperty(n)&&l.hasOwnProperty(n)&&G(b[n],l[n])&&(m+=1);m===j&&g.push(l)}return d=g,e=r(b),d}function G(a,b){if(!p(a))return q(a)?a.test(b):b===a;var c=-1,d=a.length;while(++c<d)if(a[c]===b)return!0;return!1}function H(){var a=0,c=s(e).length;for(var d in e)e.hasOwnProperty(d)&&e.hasOwnProperty(d)&&b[d]===e[d]&&(a+=1);return c>0&&a>=c}function I(a){var b={all:K,set:J,filterable:L("filterable"),summarizable:L("summarizable"),pseudo:L("pseudo"),labelable:L("labelable"),get:M,add:Q};return a!==undefined?b[a]:b}function J(b){a={};var c=-1,d=b.length;while(++c<d)Q(b[c])}function K(){var b=[];for(var c in a)a.hasOwnProperty(c)&&(b[a[c].index]=a[c]);return b}function L(b){var c=[];for(var d in a)a.hasOwnProperty(d)&&a[d][b]===!0&&c.push(a[d]);return c}function M(b){return a[b]}function N(a,b){var c=0,d=-1,e=a.length;while(++d<e)c+=a[d][b.dataSource];return c}function O(a,b){return N(a,b)/a.length}function P(a,b){return a.length}function Q(b){t(b)==="string"&&(b={name:b}),b.type===undefined&&(b.type="string"),b.pseudo===undefined&&(b.pseudo=!1),b.labelable===undefined&&(b.labelable=!0),b.filterable===undefined&&(b.filterable=!1),b.dataSource===undefined&&(b.dataSource=b.name),b.index===undefined&&(b.index=s(a).length);if(b.summarizable&&(b.labelable||b.filterable)){var c=r(b);c.labelable=!1,c.filterable=!1,c.dataSource=b.name,c.summarizable!==!0?c.name=c.name+"_"+c.summarizable:c.name=c.name+"_count",Q(c),b.summarizable=!1,b.summarizeFunction=undefined}else if(b.summarizable){if(b.summarizeFunction===undefined){switch(b.summarizable){case"sum":b.summarizeFunction=N;break;case"avg":b.summarizeFunction=O;break;default:b.summarizeFunction=P}b.summarizable=!0}}else b.summarizable=!1;return b.pseudo&&b.pseudoFunction===undefined&&(b.pseudoFunction=function(a){return""}),b.displayFunction===undefined&&(b.displayFunction=S),b.values={},b.displayValues={},a[b.name]=b,b}function R(b,c){if(a[b]===undefined||a[b].filterable===!1)return;a[b].values[c]===undefined?a[b].values[c]={count:1,displayValue:a[b].displayFunction(c,b)}:a[b].values[c].count+=1}function S(b,c){var d;t(c)==="string"&&(d=a[c]),d===undefined&&(d=Q(c));switch(d.type){case"cents":return"$"+(b/100).toFixed(2);case"currency":return"$"+b.toFixed(2);case"date":return n(new Date(b));case"time":return o(new Date(b));default:return b}}function T(b,c){var d,e;t(b)==="string"&&(d=a[b]),d===undefined&&(d=Q(b));switch(d.type){case"integer":case"cents":return t(c)==="number"?c:parseInt(c,10);case"float":case"currency":return t(c)==="number"?c:parseFloat(c,10);case"date":case"time":switch(t(c)){case"number":case"date":return c;default:var f=Date.parse(c);return isNaN(f)&&(f=parseInt(c)),f};default:return c.toString()}}function U(a){var b={raw:c,all:d};return a!==undefined?b[a]:b}function V(){return{all:W,rowLabels:X,columnLabels:Y,summaries:Z}}function W(){return f}function X(){return{set:ab,get:f.rowLabels}}function Y(){return{set:bb,get:f.columnLabels}}function Z(){return{set:cb,get:f.summaries}}function $(b,c){t(c)==="string"&&(c=a[c]),f[b][c.name]=c}function _(a,b){f[a]={};var c=-1,d=b.length;while(++c<d)$(a,b[c])}function ab(a){_("rowLabels",a)}function bb(a){_("columnLabels",a)}function cb(a){_("summaries",a)}function db(){return{data:eb,columns:fb}}function eb(){F();var b={},c=[],e=-1,g=d.length,h;while(++e<g){var i=d[e],j="";for(var k in f.rowLabels)f.rowLabels.hasOwnProperty(k)&&(j+=k+":"+i[k]+"|");if(b[j]===undefined){b[j]={};for(var k in f.rowLabels)f.rowLabels.hasOwnProperty(k)&&(b[j][k]=a[k].displayFunction(i[k],k));b[j].rows=[]}b[j].rows.push(i)}for(j in b)for(var k in f.summaries)f.summaries.hasOwnProperty(k)&&(b[j][k]=a[k].summarizeFunction(b[j].rows,a[k]),b[j][k]=a[k].displayFunction(b[j][k],k));h=s(b).sort(),e=-1,g=h.length;while(++e<g)c.push(b[h[e]]);return c}function fb(){}"use strict";var a,b,c,d,e,f;return g(),{init:g,reset:h,config:i,utils:j,csv:x,json:w,data:U,results:eb,fields:I,filters:A,display:V}}();
