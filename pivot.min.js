/**
 * @class Pivot
 *
 * Pivot.js is a simple way for you to get to your data. It allows for the creation of highly customizable unique table views from your browser.
 */
var pivot=function(){function j(g){return c=[],d=[],e={},a={},b={},f={rowLabels:{},columnLabels:{},summaries:{}},g===undefined&&(g={}),g.fields!==undefined&&M(g.fields),g.filters!==undefined&&H(g.filters),g.rowLabels!==undefined&&eb(g.rowLabels),g.columnLabels!==undefined&&fb(g.columnLabels),g.summaries!==undefined&&gb(g.summaries),g.csv!==undefined&&A(g.csv),g.json!==undefined&&z(g.json),pivot}function k(){return j()}function l(){return{fields:N(),filters:b,rowLabels:v(f.rowLabels),columnLabels:v(f.columnLabels),summaries:v(f.summaries)}}function m(){return{pad:n,padRight:o,padLeft:p,formatDate:q,formatTime:r,isArray:s,isRegExp:t,shallowClone:u,objectKeys:v,objectType:w,sortNumerically:x}}function n(a,b,c,d){d===undefined&&(d=" "),b=b.toString(),d=d.toString();while(b.length<c)a==="left"?b=d+b:b+=d;return b}function o(a,b,c){return n("right",a,b,c)}function p(a,b,c){return n("left",a,b,c)}function q(a){return a.getUTCFullYear()+"-"+p(a.getUTCMonth()+1,2,"0")+"-"+p(a.getUTCDate(),2,"0")}function r(a){return q(a)+" "+p(a.getUTCHours(),2,"0")+":"+p(a.getUTCMinutes(),2,"0")}function s(a){return Array.isArray?Array.isArray(a):w(a)=="array"}function t(a){return w(a)=="regexp"}function u(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function v(a){if(Object.keys)return Object.keys(a);var b=[];for(key in a)b.push(key);return b}function w(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function x(a){return a.sort(function(a,b){return a-b})}function y(b){var c=[],d={},e=-1,f=b.length;while(++e<f){var g=a[b[e]];g===undefined&&(g=U(b[e])),c.push(g)}return c}function z(a){var b,d=P("pseudo");w(a)==="string"&&(a=JSON.parse(a)),c=[];var e={},f=-1,g=a.length;while(++f<g)f===0?b=y(a[f]):c.push(C(a[f],b,d))}function A(a){var b,d=P("pseudo");c=B(a,function(a,c){if(c!==0)return C(a,b,d);b=y(a)})}function B(a,b){function j(){if(f.lastIndex>=a.length)return d;if(i)return i=!1,c;var b=f.lastIndex;if(a.charCodeAt(b)===34){var e=b;while(e++<a.length)if(a.charCodeAt(e)===34){if(a.charCodeAt(e+1)!==34)break;e++}f.lastIndex=e+2;var g=a.charCodeAt(e+1);return g===13?(i=!0,a.charCodeAt(e+2)===10&&f.lastIndex++):g===10&&(i=!0),a.substring(b+1,e).replace(/""/g,'"')}var h=f.exec(a);return h?(i=h[0].charCodeAt(0)!==44,a.substring(b,h.index)):(f.lastIndex=a.length,a.substring(b))}var c={},d={},e=[],f=/\r\n|[,\r\n]/g,g=0,h,i;f.lastIndex=0;while((h=j())!==d){var k=[];while(h!==c&&h!==d)k.push(h),h=j();if(b&&!(k=b(k,g++)))continue;e.push(k)}return e}function C(a,b,c){var d={},e=-1,f=b.length;while(++e<f){var g=X(b[e].name,a[e]);d[b[e].name]=g,V(b[e].name,g)}e=-1,f=c.length;while(++e<f){var h=c[e],g=X(h.name,h.pseudoFunction(d,h));d[h.name]=g,V(h.name,g)}return d}function D(a){var b={all:G,set:H,apply:I,add:F};return a!==undefined?b[a]:b}function E(a){a===undefined&&(a=b);var c;for(c in a)if(a.hasOwnProperty(c)&&!t(a[c]))if(s(a[c])){var d=-1,e=a[c].length;while(++d<e)a[c][d]=X(c,a[c][d])}else a[c]=X(c,a[c])}function F(a){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);E()}function G(){return b}function H(a){b=a,E()}function I(a){var f=d,g=[];a!==undefined&&H(a);var h=K();h?f=d:f=c;var i=f.length,j=v(b).length,k=-1;while(++k<i){var l=f[k],m=0;for(var n in b)b.hasOwnProperty(n)&&l.hasOwnProperty(n)&&J(b[n],l[n])&&(m+=1);m===j&&g.push(l)}return d=g,e=u(b),d}function J(a,b){if(!s(a))return t(a)?a.test(b):b===a;var c=-1,d=a.length;while(++c<d)if(a[c]===b)return!0;return!1}function K(){var a=0,c=v(e).length;for(var d in e)e.hasOwnProperty(d)&&e.hasOwnProperty(d)&&b[d]===e[d]&&(a+=1);return c>0&&a>=c}function L(a){var b={columnLabelable:P("columnLabelable"),rowLabelable:P("rowLabelable"),summarizable:P("summarizable"),filterable:P("filterable"),pseudo:P("pseudo"),clone:N,add:U,all:O,set:M,get:Q};return a!==undefined?b[a]:b}function M(b){a={};var c=-1,d=b.length;while(++c<d)U(b[c])}function N(){var b=[];for(var c in a){var d={};for(var e in a[c])a[c].hasOwnProperty(e)&&e!=="values"&&(d[e]=a[c][e]);b.push(d)}return b}function O(){var b=[];for(var c in a)a.hasOwnProperty(c)&&(b[a[c].index]=a[c]);return b}function P(b){var c=[];for(var d in a)a.hasOwnProperty(d)&&a[d][b]===!0&&c.push(a[d]);return c}function Q(b){return a[b]}function R(a,b){var c=0,d=-1,e=a.length;while(++d<e)c+=a[d][b.dataSource];return c}function S(a,b){return R(a,b)/a.length}function T(a,b){return a.length}function U(b){w(b)==="string"&&(b={name:b}),b.type===undefined&&(b.type="string"),b.pseudo===undefined&&(b.pseudo=!1),b.rowLabelable===undefined&&(b.rowLabelable=!0),b.columnLabelable===undefined&&(b.columnLabelable=!1),b.filterable===undefined&&(b.filterable=!1),b.dataSource===undefined&&(b.dataSource=b.name);if(b.summarizable&&(b.rowLabelable||b.columnLabelable||b.filterable)){var c=u(b);c.rowLabelable=!1,c.filterable=!1,c.dataSource=b.name,c.summarizable!==!0?c.name=c.name+"_"+c.summarizable:c.name=c.name+"_count",U(c),b.summarizable=!1,b.summarizeFunction=undefined}else if(b.summarizable){if(b.summarizeFunction===undefined){switch(b.summarizable){case"sum":b.summarizeFunction=R;break;case"avg":b.summarizeFunction=S;break;default:b.summarizeFunction=T}b.summarizable=!0}}else b.summarizable=!1;return b.pseudo&&b.pseudoFunction===undefined&&(b.pseudoFunction=function(a){return""}),b.displayFunction===undefined&&(b.displayFunction=W),b.values={},b.displayValues={},b.index=v(a).length,a[b.name]=b,b}function V(b,c){if(a[b]===undefined||a[b].filterable===!1)return;a[b].values[c]===undefined?a[b].values[c]={count:1,displayValue:a[b].displayFunction(c,b)}:a[b].values[c].count+=1}function W(b,c){var d;w(c)==="string"&&(d=a[c]),d===undefined&&(d=U(c));switch(d.type){case"cents":return"$"+(b/100).toFixed(2);case"currency":return"$"+b.toFixed(2);case"date":return q(new Date(b));case"time":return r(new Date(b));default:return b}}function X(b,c){var d,e;w(b)==="string"&&(d=a[b]),d===undefined&&(d=U(b));switch(d.type){case"integer":case"cents":return w(c)==="number"?c:parseInt(c,10);case"float":case"currency":return w(c)==="number"?c:parseFloat(c,10);case"date":case"time":switch(w(c)){case"number":case"date":return c;default:var f=Date.parse(c);return isNaN(f)&&(f=parseInt(c)),f};default:return c.toString()}}function Y(a){var b={raw:c,all:d};return a!==undefined?b[a]:b}function Z(){return{all:$,rowLabels:_,columnLabels:ab,summaries:bb}}function $(){return f}function _(){return{set:eb,get:f.rowLabels}}function ab(){return{set:fb,get:f.columnLabels}}function bb(){return{set:gb,get:f.summaries}}function cb(b,c){w(c)==="string"&&(c=a[c]),g=undefined,f[b][c.name]=c}function db(a,b){f[a]={};var c=-1,d=b.length;while(++c<d)cb(a,b[c])}function eb(a){db("rowLabels",a)}function fb(a){db("columnLabels",a)}function gb(a){db("summaries",a)}function hb(){return{all:ib,columns:pb}}function ib(){return g!==undefined?ob():(g={},h={},jb(),v(f.columnLabels).length>0?kb():mb(),ob())}function jb(){I();var b=-1,c=d.length,e;while(++b<c){var h=d[b],i="";for(var j in f.rowLabels)f.rowLabels.hasOwnProperty(j)&&(i+=j+":"+h[j]+"|");if(g[i]===undefined){g[i]={};for(var j in f.rowLabels)f.rowLabels.hasOwnProperty(j)&&(g[i][j]=a[j].displayFunction(h[j],j));g[i].rows=[]}g[i].rows.push(h)}}function kb(){for(var b in g)for(var c in f.columnLabels)if(f.columnLabels.hasOwnProperty(c)){var d=lb(g[b].rows,a[c]);for(var e in d)g[b][e]=nb(d[e])}return g}function lb(a,b){var c=-1,d=a.length,e={};while(++c<d){var f=a[c][b.name];e[f]===undefined&&(e[f]={rows:[]}),e[f].rows.push(a[c])}return e}function mb(){for(var a in g)nb(g[a]);return g}function nb(b){var c={};for(var d in f.summaries)f.summaries.hasOwnProperty(d)&&(b[d]=a[d].summarizeFunction(b.rows,a[d]),b[d]=a[d].displayFunction(b[d],d));return b}function ob(){var a=[],b=v(g).sort(),c=-1,d=b.length;while(++c<d)a.push(g[b[c]]);return a}function pb(){return qb(),rb(),h}function qb(){for(var a in f.rowLabels)h[f.rowLabels[i]];return h}function rb(){}"use strict";var a,b,c,d,e,f,g,h;return j(),{init:j,reset:k,config:l,utils:m,csv:A,json:z,data:Y,results:hb,fields:L,filters:D,display:Z}}();
